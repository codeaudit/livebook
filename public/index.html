<html>
<head>
  <link href="style.css" rel="stylesheet" type="text/css" />

  <script src="/ace-editor/ace.js"></script>
  <script src="/d3/d3.js"></script>
  <script src="/app.js"></script>
</head>
<body>
  <div id="code">
  <div id="editor">
    var data = load("fallout.csv")
    for (var d of data) {
        d.Minutes = dur2mins(d.Duration)
        d.CapsPerHour = round2(d.Caps * 60 / d.Minutes)
    }
    plot(data, "E", "Minutes" )
  </div>
  </div>

  <div id="plot"></div>

  <div id="data"></div>

  <script>
    // initialize ace editor
    var editor = ace.edit("editor");
    editor.getSession().setMode("ace/mode/javascript");
    editor.getSession().getSelection().selectionLead.setPosition(2, 0); // cursor at end
    editor.on("change",function() { _magic_eval(editor.getValue()); })

    _magic_eval(editor.getValue())

  </script>

</body>
</html>
